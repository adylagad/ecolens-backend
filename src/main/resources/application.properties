spring.application.name=ecolens-backend
spring.datasource.url=jdbc:h2:mem:ecolensdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.jpa.defer-datasource-initialization=true
llm.provider=gemini
GEMINI_MODEL=gemma-3-1b-it
GEMINI_VISION_MODEL=gemini-2.5-flash

# Google auth token verification
# Railway: set AUTH_GOOGLE_AUDIENCES to comma-separated OAuth client IDs.
auth.google.audiences=${AUTH_GOOGLE_AUDIENCES:}
auth.google.jwk-set-uri=https://www.googleapis.com/oauth2/v3/certs

# MongoDB Atlas migration bootstrap (incremental migration mode)
mongodb.atlas.uri=${MONGODB_ATLAS_URI:}
mongodb.atlas.database=${MONGODB_ATLAS_DATABASE:ecolens}
mongodb.atlas.products-collection=${MONGODB_ATLAS_PRODUCTS_COLLECTION:products}
mongodb.atlas.history-collection=${MONGODB_ATLAS_HISTORY_COLLECTION:scan_history}
mongodb.atlas.migration-enabled=${MONGODB_ATLAS_MIGRATION_ENABLED:false}
mongodb.atlas.runtime-enabled=${MONGODB_ATLAS_RUNTIME_ENABLED:false}
mongodb.atlas.run-on-startup=${MONGODB_ATLAS_RUN_ON_STARTUP:false}
mongodb.atlas.migrate-products=${MONGODB_ATLAS_MIGRATE_PRODUCTS:true}
mongodb.atlas.migrate-history=${MONGODB_ATLAS_MIGRATE_HISTORY:true}

# Score composition (config-driven, no code change required for tuning)
scoring.version=v3-feature-driven-percentile-co2
scoring.min-score=0
scoring.max-score=100
scoring.default-catalog-eco-score=50
scoring.default-co2-score=50
scoring.default-carbon-impact-gram=100.0
scoring.catalog-weight=0.45
scoring.co2-weight=0.55
scoring.greener-alternative-boost=6
scoring.greener-alternative-threshold=90
scoring.high-impact-threshold=40
scoring.history-greener-threshold=85
scoring.moderate-impact-threshold=70
scoring.co2-normalization.lower-percentile=0.05
scoring.co2-normalization.upper-percentile=0.95
scoring.feature-thresholds.recycled-content-medium-percent=30
scoring.feature-thresholds.recycled-content-high-percent=70

scoring.adjustments.single-use-penalty=-18
scoring.adjustments.reusable-bonus=18
scoring.adjustments.refillable-lifecycle-bonus=8
scoring.adjustments.long-life-lifecycle-bonus=6
scoring.adjustments.biodegradable-lifecycle-bonus=5
scoring.adjustments.nature-positive-bonus=24
scoring.adjustments.plastic-penalty=-10
scoring.adjustments.paper-penalty=-2
scoring.adjustments.aluminum-glass-bonus=5
scoring.adjustments.cloth-recycled-bonus=10
scoring.adjustments.recycled-content-medium-bonus=4
scoring.adjustments.recycled-content-high-bonus=8
scoring.adjustments.recyclability-high-bonus=10
scoring.adjustments.recyclability-medium-bonus=3
scoring.adjustments.recyclability-low-penalty=-8
scoring.adjustments.recyclability-organic-bonus=6

# Catalog growth and match coverage
catalog.auto-learn-enabled=true
catalog.auto-learn-require-image=true
catalog.auto-learn-min-confidence=0.65
catalog.coverage.exact=1.0
catalog.coverage.fuzzy-min=0.65
catalog.coverage.auto-learned=0.6
catalog.coverage.none=0.3
catalog.coverage.inference-penalty=0.9
